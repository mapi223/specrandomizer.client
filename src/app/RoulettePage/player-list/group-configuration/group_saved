GetRole(player: IPlayer): IRole {
    // Implement your logic to get the role for the player
    this.store.select(selectListOfPlayers).pipe(take(1)).subscribe(players => {
      const numPlayers = players.length;
      // Logic to determine role based on number of players or other criteria
      if (numPlayers <= 3) {
        this.role = Math.floor(Math.random() * 3); // Tank, Healer, Damage
        if (this.role === IRole.Tank && !this.tankPicked) {
          this.tankPicked = true;
          return this.role = IRole.Tank;
        }
        else if (this.role === IRole.Healer && !this.healerPicked) {
          this.healerPicked = true;
          return this.role = IRole.Healer;
        }
        else if ((this.healerPicked || this.tankPicked || this.role === IRole.Damage) && this.allDamagePicked < 3) {
          this.allDamagePicked += 1;
          return this.role = IRole.Damage;
        }
        else {
          return this.role = IRole.INVALID;
        }
      }
      else if (numPlayers == 4) {
        this.role = Math.floor(Math.random() * 3); // Tank, Healer, Damage
        if (this.role === IRole.Tank && !this.tankPicked) {
          this.tankPicked = true;
          return this.role = IRole.Tank;
        }
        else if (this.role === IRole.Healer && !this.healerPicked) {
          this.healerPicked = true;
          return this.role = IRole.Healer;
        }
        else if ((this.healerPicked || this.tankPicked || this.role === IRole.Damage) && this.allDamagePicked < 3) {
          this.allDamagePicked += 1;
          return this.role = IRole.Damage;
        }
        else if (this.allDamagePicked >= 3 && !this.healerPicked && this.tankPicked) {
          this.healerPicked = true;
          return this.role = IRole.Healer;
        }
        else if (this.allDamagePicked >= 3 && !this.tankPicked && this.healerPicked) {
          this.tankPicked = true;
          return this.role = IRole.Tank;
        }
        else if (this.allDamagePicked >= 3 && !this.tankPicked && !this.healerPicked) {
          this.role = Math.floor(Math.random() * 2); // Tank or Healer
          if (this.role === IRole.Healer) {
            this.healerPicked = true;
            return this.role = IRole.Healer;
          } else {
            this.tankPicked = true;
            return this.role = IRole.Tank;
          }
        }
        else {
          console.log(`Error in role assignment for 4 players ${player.PlayerName}, Role: ${this.role}`);
          return this.role = IRole.INVALID;
        }
      }
      else {
        this.role = Math.floor(Math.random() * 3); // Tank, Healer, Damage
        if (this.role === IRole.Tank && !this.tankPicked) {
          this.tankPicked = true;
          return this.role = IRole.Tank;
        }
        else if (this.role === IRole.Healer && !this.healerPicked) {
          this.healerPicked = true;
          return this.role = IRole.Healer;
        }
        else if ((this.healerPicked || this.tankPicked || this.role === IRole.Damage) && this.allDamagePicked < 3) {
          this.allDamagePicked += 1;
          return this.role = IRole.Damage;
        }
        else if (this.allDamagePicked >= 3 && !this.healerPicked && this.tankPicked) {
          this.healerPicked = true;
          return this.role = IRole.Healer;
        }
        else if (this.allDamagePicked >= 3 && !this.tankPicked && this.healerPicked) {
          this.tankPicked = true;
          return this.role = IRole.Tank;
        }
        else if (this.allDamagePicked >= 3 && !this.tankPicked && !this.healerPicked) {
          this.role = Math.floor(Math.random() * 2); // Tank or Healer
          if (this.role === IRole.Healer) {
            this.healerPicked = true;
            return this.role = IRole.Healer;
          } else {
            this.tankPicked = true;
            return this.role = IRole.Tank;
          }
        }
        else {
          console.log(`Error in role assignment for 5 players ${player.PlayerName}, Role: ${this.role}`);
          return this.role = IRole.INVALID;
        }
      }
    });
    return this.role;
  }